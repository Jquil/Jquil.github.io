<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>markdown</title>
    </head>
    <style>
        code,
        pre{
            color: #333;
            background: none;
            font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
            text-align: left;
            white-space: pre;
            word-spacing: normal;
            word-break: normal;
            word-wrap: normal;
            line-height: 1.4;

            -moz-tab-size: 8;
            -o-tab-size: 8;
            tab-size: 8;

            -webkit-hyphens: none;
            -moz-hyphens: none;
            -ms-hyphens: none;
            hyphens: none;
        }

        /* Code blocks */
        pre{
            padding: .8em;
            overflow: auto;
            /* border: 1px solid #ddd; */
            border-radius: 3px;
            /* background: #fff; */
            background: #f5f5f5;
        }

        /* Inline code */
        :not(pre)>code{
            padding: .1em;
            border-radius: .3em;
            white-space: normal;
            background: #f5f5f5;
        }

        html body {
            font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: #333;
            background-color: #fff;
            overflow: initial;
            box-sizing: border-box;
            word-wrap: break-word
        }

        html body>:first-child {
            margin-top: 0
        }

        html body h1,
        html body h2,
        html body h3,
        html body h4,
        html body h5,
        html body h6 {
            line-height: 1.2;
            margin-top: 1em;
            margin-bottom: 16px;
            color: #000
        }

        html body h1 {
            font-size: 2.25em;
            font-weight: 300;
            padding-bottom: .3em
        }

        html body h2 {
            font-size: 1.75em;
            font-weight: 400;
            padding-bottom: .3em
        }

        html body h3 {
            font-size: 1.5em;
            font-weight: 500
        }

        html body h4 {
            font-size: 1.25em;
            font-weight: 600
        }

        html body h5 {
            font-size: 1.1em;
            font-weight: 600
        }

        html body h6 {
            font-size: 1em;
            font-weight: 600
        }

        html body h1,
        html body h2,
        html body h3,
        html body h4,
        html body h5 {
            font-weight: 600
        }

        html body h5 {
            font-size: 1em
        }

        html body h6 {
            color: #5c5c5c
        }

        html body strong {
            color: #000
        }

        html body del {
            color: #5c5c5c
        }

        html body a:not([href]) {
            color: inherit;
            text-decoration: none
        }

        html body a {
            color: #08c;
            text-decoration: none
        }

        html body a:hover {
            color: #00a3f5;
            text-decoration: none
        }

        html body img {
            max-width: 100%
        }

        html body>p {
            margin-top: 0;
            margin-bottom: 16px;
            word-wrap: break-word
        }

        html body>ul,
        html body>ol {
            margin-bottom: 16px
        }

        html body ul,
        html body ol {
            padding-left: 2em
        }

        html body ul.no-list,
        html body ol.no-list {
            padding: 0;
            list-style-type: none
        }

        html body ul ul,
        html body ul ol,
        html body ol ol,
        html body ol ul {
            margin-top: 0;
            margin-bottom: 0
        }

        html body li {
            margin-bottom: 0
        }

        html body li.task-list-item {
            list-style: none
        }

        html body li>p {
            margin-top: 0;
            margin-bottom: 0
        }

        html body .task-list-item-checkbox {
            margin: 0 .2em .25em -1.8em;
            vertical-align: middle
        }

        html body .task-list-item-checkbox:hover {
            cursor: pointer
        }

        html body blockquote {
            margin: 16px 0;
            font-size: inherit;
            padding: 0 15px;
            color: #5c5c5c;
            border-left: 4px solid #d6d6d6
        }

        html body blockquote>:first-child {
            margin-top: 0
        }

        html body blockquote>:last-child {
            margin-bottom: 0
        }

        html body hr {
            height: 4px;
            margin: 32px 0;
            background-color: #d6d6d6;
            border: 0 none
        }

        html body table {
            margin: 10px 0 15px 0;
            border-collapse: collapse;
            border-spacing: 0;
            display: block;
            width: 100%;
            overflow: auto;
            word-break: normal;
            word-break: keep-all
        }

        html body table th {
            font-weight: bold;
            color: #000
        }

        html body table td,
        html body table th {
            border: 1px solid #d6d6d6;
            padding: 6px 13px
        }

        html body dl {
            padding: 0
        }

        html body dl dt {
            padding: 0;
            margin-top: 16px;
            font-size: 1em;
            font-style: italic;
            font-weight: bold
        }

        html body dl dd {
            padding: 0 16px;
            margin-bottom: 16px
        }

        html body code {
            font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;
            font-size: .85em !important;
            color: #000;
            background-color: #f0f0f0;
            border-radius: 3px;
            padding: .2em 0
        }

        html body code::before,
        html body code::after {
            letter-spacing: -0.2em;
            content: "\00a0"
        }

        html body pre>code {
            padding: 0;
            margin: 0;
            font-size: .85em !important;
            word-break: normal;
            white-space: pre;
            background: transparent;
            border: 0;
            
        }

        html body pre {
            padding: 1em;
            overflow: auto;
            font-size: .85em !important;
            line-height: 1.45;
            border: #d6d6d6;
            border-radius: 3px
        }

        html body pre code,
        html body pre tt {
            display: inline;
            max-width: initial;
            padding: 0;
            margin: 0;
            overflow: initial;
            line-height: inherit;
            word-wrap: normal;
            background-color: transparent;
            border: 0
        }

        html body pre code:before,
        html body pre tt:before,
        html body pre code:after,
        html body pre tt:after {
            content: normal
        }

        html body p,
        html body blockquote,
        html body ul,
        html body ol,
        html body dl,
        html body pre {
            margin-top: 0;
            margin-bottom: 16px
        }

        html body kbd {
            color: #000;
            border: 1px solid #d6d6d6;
            border-bottom: 2px solid #c7c7c7;
            padding: 2px 4px;
            background-color: #f0f0f0;
            border-radius: 3px
        }

        @media print {
            html body {
                background-color: #fff
            }

            html body h1,
            html body h2,
            html body h3,
            html body h4,
            html body h5,
            html body h6 {
                color: #000;
                page-break-after: avoid
            }

            html body blockquote {
                color: #5c5c5c
            }

            html body pre {
                page-break-inside: avoid
            }

            html body table {
                display: table
            }

            html body img {
                display: block;
                max-width: 100%;
                max-height: 100%
            }

            html body pre,
            html body code {
                word-wrap: break-word;
                white-space: pre
            }
        }

        .markdown-preview {
            width: 100%;
            height: 100%;
            box-sizing: border-box
        }

        html #md[for="html-export"]:not([data-presentation-mode]) .markdown-preview {
            position: relative;
            top: 0
        }

        @media screen and (min-width:914px) {
            html #md[for="html-export"]:not([data-presentation-mode]) .markdown-preview {
                padding: 2em calc(50% - 457px + 2em)
            }

            
        }

        @media screen and (max-width:914px) {
            html #md[for="html-export"]:not([data-presentation-mode]) .markdown-preview {
                padding: 2em
            }

            .line-number{
                border-right: 1px solid rgba(0, 0, 0, .2);
            }
        }

        @media screen and (max-width:450px) {
            html #md[for="html-export"]:not([data-presentation-mode]) .markdown-preview {
                font-size: 14px !important;
                padding: 1em
            }
        }

        .line-number{
            user-select: none;
            display: inline-block;
            text-align: right;
            padding-right: 10px;
            margin-right: 10px;
            border-right: 1px solid rgba(0, 0, 0, .2);
        }

        #md img{
            cursor: pointer;
            box-shadow: 5px 1px 25px 1px rgba(0, 0, 0, .2);
        }

        #modal{
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, .2);
            position: fixed;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            display: flex;
            align-items: center;
        }
        #modal img{
            width: 100%;
        }
    </style>
    <body>
        <div id="md" for="html-export">
            <div class="markdown-preview" id="show"></div>
        </div>
        <div id="modal" style="display: none;"><img /></div>
    </body>

    <script src="https://cdn.bootcdn.net/ajax/libs/marked/2.1.3/marked.js"></script>
    <script>
        var modal = document.getElementById("modal")
        var xhr = new XMLHttpRequest()
        xhr.open("GET","https://md.jqwong.cn/technology/130.md",true)
        xhr.send()
        xhr.onreadystatechange = () => {
            if(xhr.readyState == 4 && xhr.status == 200){
                let res = xhr.response
                res = res.replaceAll("** ","**")
                res = res.replaceAll(" **","**")
                res = res.replaceAll("\\\"","\"")
                document.getElementById('show').innerHTML = marked(res)
                lineNum()
                cb()
                pic()
            }
        }

        // Markdown 行号
        function lineNum(){
            var pre = document.getElementsByTagName("pre")
            for(let i = 0; i < pre.length; i++){
                if(pre[i].childNodes[0].tagName == "CODE"){
                    let w_number = 5
                    let reg = /\n/ig
                    let data = pre[i].childNodes[0].childNodes[0].data
                    let match = data.match(reg)
                    data = data.substring(0,data.lastIndexOf("\n"))
                    data = data.replaceAll("<","&lt;")
                    if(match != null){
                        w_number = w_number * (String(match.length).length)
                    }
                    data = `<span class='line-number' style='width:${w_number}px'>1</span>` + data
                    let index = 1
                    data = data.replaceAll("\n",function(match, p1, p2, p3, offset, string){
                        index++
                        return `\n<span class='line-number' style='width:${w_number}px'>${index}</span>`
                    })
                    pre[i].childNodes[0].innerHTML = data
                }
            }
        }
        
        // 禁止checkbox勾选 && 设置父节点<li>的ClassName
        function cb(){
            var input = document.getElementsByTagName("input")
            for(let i = 0; i < input.length; i++){
                switch(input[i].getAttribute("type")){
                case "checkbox":
                    input[i].setAttribute("disabled","")
                    if(input[i].parentNode != null && input[i].parentNode.tagName == "LI"){
                    input[i].parentNode.className = "task-list-item"
                    }
                    break;
                }
            }
        }
    
        // 查看图片
        function pic(){
            var imgs = document.getElementById("show").querySelectorAll("img")
            for(let i = 0; i < imgs.length; i++){
                imgs[i].onclick = function(){
                    modal.style.display = ""
                    modal.children[0].setAttribute('src',this.getAttribute('src'))
                }
            }
        }

        // 关闭图片
        modal.onclick = function(){
            this.style.display = "none"
        }
    </script>
</html>
