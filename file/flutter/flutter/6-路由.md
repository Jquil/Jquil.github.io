# 前言

![](https://tse2-mm.cn.bing.net/th/id/OIP-C.Y6zrxXIEE_FgQS1RCLuJmAHaEP?w=706&h=280&c=7&o=5&pid=1.7)

Flutter中使用路由会接触到这么两个对象：Navigator & Route

路由表用栈结构实现，而Navigator则负责Route的入栈出栈操作

它有一下以下属性：

```
• initialRoute: 初始路由的
• onGenerateRoute: 路由拦截器
• onUnknownRoute: 404
• routes : 路由集合
```

# 基本路由

```
class FirstPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('第一个页面'),
      ),
      body: Center(
        child: RaisedButton(
            child: Text('跳转到第二个页面'),
            onPressed: () => Navigator.push(context,
                MaterialPageRoute(builder: (context) => SecondPage()))),
      ),
    );
  }
}

class SecondPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('第二个页面'),
      ),
      body: Center(
        child: RaisedButton(
            child: Text('返回上一个页面'),
 onPressed: () => Navigator.pop(context)),
      ),
    );
  }
}
```

新鲜名词：`MaterialPageRoute`：MaterialPageRoute是一种路由模板，定义了路由创建以及路由切换过渡动画的相关配置，该配置可以根据不同的平台实现与平台页面切换动画风格一致的路由切换动画。


# 命名路由

在根组件`main.dart`简单配置：
```
import 'package:flutter/material.dart';
import 'pages/p1.dart';
import 'pages/p2.dart';

void main() => runApp(MyApp());
class MyApp extends StatelessWidget {  
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home:p1(),
      routes: {
        '/p2':(context)=>p2(),
      }
    );
  }
}

// 使用：
Navigator.pushNamed(context,"/p2");
```


# 模块化
新建路由文件：`lib>routes>Routes.dart`

```
import 'package:flutter/material.dart';
import '../pages/p1.dart';
import '../pages/p2.dart';

// 配置路由
final routes={
      '/'  :(context)=>p1(),
      '/p2':(context)=>p2(),
};

//固定写法
var onGenerateRoute=(RouteSettings settings) {
      // 统一处理
      final String name = settings.name; 
      final Function pageContentBuilder = routes[name];
      if (pageContentBuilder != null) {
        if (settings.arguments != null) {
          final Route route = MaterialPageRoute(
              builder: (context) =>
                  pageContentBuilder(context, arguments: settings.arguments));
          return route;
        }else{
            final Route route = MaterialPageRoute(
              builder: (context) =>
                  pageContentBuilder(context));
            return route;
        }
      }
};
```

根组件中引入：
```
import 'package:flutter/material.dart';
import 'routes/Routes.dart';

void main() => runApp(MyApp());
class MyApp extends StatelessWidget {  
  
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      initialRoute: '/',
      onGenerateRoute: onGenerateRoute
    );
  }
}
```


# 路由传参

\> 基本路由传参：
```
// FirstPage.dart
Navigator.push(
                context,
                MaterialPageRoute(
                  // 传递title为SecondPage，跳转到第二个界面就会把标题设置为SecondPage
                  builder: (context) => SecondPage(title: "SecondPage"),
                ));

====>

// SecondPage.dart
class SecondPage extends StatelessWidget {
  // 定义一个需要变量, 接收传递的参数
  final String title;

  // 为title设置一个默认参数，这样的跳转该界面时可以不传值。
  SecondPage({Key key, this.title = "第二个界面"});

  ...
}
```


\> 命名路由传参：
```
// 传递
Navigator.of(context).pushNamed("second", arguments: " from first page");

========

// 接收
class SecondPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    //取出路由参数
    String msg = ModalRoute.of(context).settings.arguments as String; 
    ...
  }
}
```

详情请查看：[Flutter页面路由导航及传参](https://zhuanlan.zhihu.com/p/103647244)


# 小结

最后附上：

1. [路由管理](https://book.flutterchina.club/chapter2/flutter_router.html)

1. [Flutter Route路由基本用法](https://blog.csdn.net/senkai123/article/details/102948524)

1. [Flutter中的命名路由](https://www.cnblogs.com/yuyujuan/p/11006780.html)